<p id="notice"><%= notice %></p>

<!-- https://bootswatch.com/simplex/ -->
<div class="navbar navbar-expand-lg fixed-top navbar-yellow bg-light">
  <div class="container">
    <a href="../" class="title-text navbar-brand">Easy ADR</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../help/">Help</a>
        </li>
        <li class="nav-item">
          <% account_dissabled = "disabled" if session[:user_id].blank? %>
          <%= link_to 'Account', @user, class: "nav-link #{account_dissabled}" %>
        </li>
        <% if session[:user_id].present? %>
         <li class="nav-item">
            <%= link_to 'Logout', logout_path, method: 'delete', class: "nav-link" %>
          </li>
        <% else %>
          <li class="nav-item">
            <%= link_to 'Login', login_path, class: "nav-link" %>
          </li>
        <% end %>
      </ul>
      <%= button_to 'New Docket', new_docket_path, action: 'new', method: 'get', class: "btn my-2 my-sm-0 button btn btn-primary", disabled: session[:user_id].blank? %>
    </div>
  </div>
</div>

<% if session[:user_id].present? %>
  <div class="container padding-hack">
    <table class="table container">
      <thead>
        <tr>
          <th class="text-nowrap">Date</th>
          <th>Equipment no</th>
          <th>Customer reference no</th>
          <th class="d-none d-lg-table-cell">Seal no</th>
          <th>Description</th>
          <th class="d-none d-lg-table-cell">Return empty</th>
          <th class="d-none d-lg-table-cell">Deliver to</th>
          <th class="d-none d-lg-table-cell">Collect from</th>
          <th class="d-none d-lg-table-cell">Hazardous good</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @dockets.reverse.each do |docket| %>
          <tr>
            <td class="text-nowrap">
              <%= docket.created_at.localtime.strftime("%d-%m-%Y")%>
              <br />
              <%= docket.created_at.localtime.strftime("%H:%M")%>
            </td>
            <td><%= docket.equipment_no %></td>
            <td><%= docket.customer_reference_no %></td>
            <td class="d-none d-lg-table-cell"><%= docket.seal_no %></td>
            <td><%= docket.description %></td>
            <td class="d-none d-lg-table-cell"><%= docket.return_empty %></td>
            <td class="d-none d-lg-table-cell"><%= docket.deliver_to ? (render partial: "address", locals: { address: docket.deliver_to }) : "No delivery address" %></td>
            <td class="d-none d-lg-table-cell"><%= docket.collect_from ? (render partial: "address", locals: { address: docket.collect_from }) : "No collection address" %></td>
            <td class="d-none d-lg-table-cell"><%= docket.hazardous_good ? docket.hazardous_good : "No hazardous" %></td>
            <td><%= link_to 'Open', docket, class: "button btn btn-primary"%></td>
            <td><%= link_to 'Delete', docket, class: "button btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <br>

    <div class="navbar navbar-bottom navbar-expand-lg navbar-light bg-light container mt-3">
    </div>
  </div>

<% else %>

  <div class="container padding-hack">
    <div class="row justify-content-md-center align-items-center">
      <div class="col col-md-auto">
        <div class="card text-white bg-primary" >
          <div class="card-header">Example docket</div>
          <div class="card-body">
            <%= image_tag("AdrDocketExample.png") %>
          </div>
        </div>
      </div>
       <div class="col col-md-auto">
        <div class="card border-secondary mb-3" style="max-width: 20rem; height: 100%;">
          <div class="card-body">
            <h4 class="body-text">
              The easiest way to create delivery dockets compliant with <a href="#">Agreement concerning the International Carriage of Dangerous Goods by Road</a> (ADR).
            <br />
            <br />
            Signup below to get started. It's free!
            </h4>
          </div>
        </div>
      </div>
     <div class="row my-4">
       <div class="col text-center">
          <h3 class="title-text">Please login or create an account</h3>
          <%= button_to 'Login', login_path, class: "btn my-2  button btn btn-primary" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
